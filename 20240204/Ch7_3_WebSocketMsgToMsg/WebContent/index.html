<!DOCTYPE html>
<html>
<head>
<meta charset="BIG5">
<title>Insert title here</title>
	<script>
		var ws;
		function openWs(){
			let wsUrl = "ws://localhost:8080/Ch7_3_WebSocketMsgToMsg/websocket";
			ws = new WebSocket(wsUrl);
			ws.onopen = (evt)=>{
				console.log("Connect....");
			}
			ws.onmessage = (evt)=>{
				
				console.log("message..."+evt.data)
			}
			
		}
	
	function sendMsg(){
		let msgObj = document.getElementById("msg");
		let fromUser = document.getElementById("from_user");
		let toUser = document.getElementById("to_user");
		let obj = {"msg":msgObj.value,
				"fromUser":fromUser.value,
				"toUser":toUser.value};
		let jsonStr = JSON.stringify(obj);
		console.log(jsonStr);
		ws.send(jsonStr);
		
	}
	
	</script>


</head>
<body>
	<button type="button" onclick="openWs()">連線</button>
	<div>
	   訊息<input type="text" id="msg"/>
	 由<input type="text" id="from_user"/>
	 送給<input type="text" id="to_user"/>
	<button type="button" onclick="sendMsg()">傳送</button>
	</div>
</body>
</html>